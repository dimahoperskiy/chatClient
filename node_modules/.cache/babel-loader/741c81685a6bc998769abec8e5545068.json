{"ast":null,"code":"import api from \"../../api/api\";\nimport { reset } from \"redux-form\";\nconst SET_CURRENT_USER = \"SET_CURRENT_USER\";\nconst LOG_OUT = \"LOG_OUT\";\nconst SET_IS_WRONG_AUTH = \"SET_IS_WRONG_AUTH\";\nconst SET_IS_WRONG_LOGIN = \"SET_IS_WRONG_LOGIN\";\nconst SET_IS_WRONG_EMAIL = \"SET_IS_WRONG_EMAIL\";\nconst SET_IS_LOADING_APP = \"SET_IS_LOADING_APP\";\nlet initialState = {\n  login: \"\",\n  email: \"\",\n  id: -1,\n  isLoggedIn: false,\n  isWrongAuth: false,\n  isWrongLogin: false,\n  isWrongEmail: false,\n  isLoadingApp: true\n};\n\nconst authReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case SET_CURRENT_USER:\n      return { ...state,\n        login: action.login,\n        email: action.email,\n        id: action.id,\n        isLoggedIn: true\n      };\n\n    case LOG_OUT:\n      return { ...state,\n        login: \"\",\n        email: \"\",\n        isLoggedIn: false\n      };\n\n    case SET_IS_WRONG_AUTH:\n      return { ...state,\n        isWrongAuth: action.isWrongAuth\n      };\n\n    case SET_IS_WRONG_LOGIN:\n      return { ...state,\n        isWrongLogin: action.isWrongLogin\n      };\n\n    case SET_IS_WRONG_EMAIL:\n      return { ...state,\n        isWrongEmail: action.isWrongEmail\n      };\n\n    case SET_IS_LOADING_APP:\n      return { ...state,\n        isLoadingApp: action.isLoadingApp\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport const loginThunk = (formData, d, func) => {\n  return dispatch => {\n    api.login(formData).then(data => {\n      dispatch(setCurrentUser(data.login, data.email, data.id));\n      d(reset('login'));\n      func();\n      return 1;\n    }).catch(err => {\n      dispatch(setIsWrongAuth(err.response.data));\n      return 0;\n    });\n  };\n};\nexport const registerThunk = (formData, d, func) => {\n  return dispatch => {\n    api.register(formData).then(() => {\n      dispatch(setCurrentUser(formData.login, formData.email));\n      d(reset('register'));\n      func();\n    }).catch(err => {\n      if (err.response.data === \"Username exists\") {\n        dispatch(setIsWrongLogin(err.response.data));\n      } else if (err.response.data === \"Email exists\") {\n        dispatch(setIsWrongEmail(err.response.data));\n      }\n    });\n  };\n};\nexport const setCurrentUser = (login, email, id) => ({\n  type: SET_CURRENT_USER,\n  login,\n  email,\n  id\n});\nexport const logOut = () => ({\n  type: LOG_OUT\n});\nexport const setIsWrongAuth = isWrongAuth => ({\n  type: SET_IS_WRONG_AUTH,\n  isWrongAuth\n});\nexport const setIsWrongLogin = isWrongLogin => ({\n  type: SET_IS_WRONG_LOGIN,\n  isWrongLogin\n});\nexport const setIsWrongEmail = isWrongEmail => ({\n  type: SET_IS_WRONG_EMAIL,\n  isWrongEmail\n});\nexport const setIsLoadingApp = isLoadingApp => ({\n  type: SET_IS_LOADING_APP,\n  isLoadingApp\n});\nexport default authReducer;","map":{"version":3,"sources":["/Users/dimitry/Desktop/dev/saturnClient/src/redux/reducers/authReducer.js"],"names":["api","reset","SET_CURRENT_USER","LOG_OUT","SET_IS_WRONG_AUTH","SET_IS_WRONG_LOGIN","SET_IS_WRONG_EMAIL","SET_IS_LOADING_APP","initialState","login","email","id","isLoggedIn","isWrongAuth","isWrongLogin","isWrongEmail","isLoadingApp","authReducer","state","action","type","loginThunk","formData","d","func","dispatch","then","data","setCurrentUser","catch","err","setIsWrongAuth","response","registerThunk","register","setIsWrongLogin","setIsWrongEmail","logOut","setIsLoadingApp"],"mappings":"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","sourcesContent":["import api from \"../../api/api\";\nimport {reset} from \"redux-form\";\n\nconst SET_CURRENT_USER = \"SET_CURRENT_USER\"\nconst LOG_OUT = \"LOG_OUT\"\nconst SET_IS_WRONG_AUTH = \"SET_IS_WRONG_AUTH\"\nconst SET_IS_WRONG_LOGIN = \"SET_IS_WRONG_LOGIN\"\nconst SET_IS_WRONG_EMAIL = \"SET_IS_WRONG_EMAIL\"\nconst SET_IS_LOADING_APP = \"SET_IS_LOADING_APP\"\n\n\nlet initialState = {\n    login: \"\",\n    email: \"\",\n    id: -1,\n    isLoggedIn: false,\n    isWrongAuth: false,\n    isWrongLogin: false,\n    isWrongEmail: false,\n    isLoadingApp: true\n}\n\nconst authReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case SET_CURRENT_USER:\n            return {\n                ...state, login: action.login, email: action.email, id: action.id, isLoggedIn: true\n            }\n        case LOG_OUT:\n            return {\n                ...state, login: \"\", email: \"\", isLoggedIn: false\n            }\n        case SET_IS_WRONG_AUTH:\n            return {\n                ...state, isWrongAuth: action.isWrongAuth\n            }\n        case SET_IS_WRONG_LOGIN:\n            return {\n                ...state, isWrongLogin: action.isWrongLogin\n            }\n        case SET_IS_WRONG_EMAIL:\n            return {\n                ...state, isWrongEmail: action.isWrongEmail\n            }\n        case SET_IS_LOADING_APP:\n            return {\n                ...state, isLoadingApp: action.isLoadingApp\n            }\n        default:\n            return state\n    }\n}\n\nexport const loginThunk = (formData, d, func) => {\n    return (dispatch) => {\n        api.login(formData)\n            .then(data => {\n                dispatch(setCurrentUser(data.login, data.email, data.id))\n                d(reset('login'))\n                func()\n                return 1\n            })\n            .catch(err => {\n                dispatch(setIsWrongAuth(err.response.data))\n                return 0\n            })\n    }\n}\n\nexport const registerThunk = (formData, d, func) => {\n    return (dispatch) => {\n        api.register(formData)\n            .then(() => {\n                dispatch(setCurrentUser(formData.login, formData.email))\n                d(reset('register'))\n                func()\n            })\n            .catch((err) => {\n                if (err.response.data === \"Username exists\") {\n                    dispatch(setIsWrongLogin(err.response.data))\n                } else if (err.response.data === \"Email exists\") {\n                    dispatch(setIsWrongEmail(err.response.data))\n                }\n            })\n    }\n}\n\n\nexport const setCurrentUser = (login, email, id) => ({type: SET_CURRENT_USER, login, email, id})\nexport const logOut = () => ({type: LOG_OUT})\nexport const setIsWrongAuth = (isWrongAuth) => ({type: SET_IS_WRONG_AUTH, isWrongAuth})\nexport const setIsWrongLogin = (isWrongLogin) => ({type: SET_IS_WRONG_LOGIN, isWrongLogin})\nexport const setIsWrongEmail = (isWrongEmail) => ({type: SET_IS_WRONG_EMAIL, isWrongEmail})\nexport const setIsLoadingApp = (isLoadingApp) => ({type: SET_IS_LOADING_APP, isLoadingApp})\n\nexport default authReducer"]},"metadata":{},"sourceType":"module"}